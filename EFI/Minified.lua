local a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s="MineOS EFI","/OS.lua","Change label","key_down","filesystem",0x2D2D2D,0xE1E1E1,0x878787,0x878787,0xE1E1E1,component.proxy,component.list,computer.pullSignal,computer.uptime,table.insert,math.max,math.min,math.huge,math.floor;local t,u,v=k(l("eeprom")()),k(l("gpu")()),l("internet")()local w,x,y,z,A,B,C,D,E=computer.shutdown,u.set,u.fill,t.setData,t.getData,u.getResolution()local F,G,H,I=function()D,E=nil,nil end,function(J)if J~=D then u.setBackground(J)D=J end end,function(J)if J~=E then u.setForeground(J)E=J end end,function(K,L,M)if#K<L then K=K..string.rep(" ",L-#K)else K=K:sub(1,L)end;return K..(M and""or"  ")end;local N,O,P=function(Q,R,S,T,J)G(J)y(Q,R,S,T," ")end,function(R,U,K)local Q=s(B/2-#K/2)H(U)x(Q,R,K)end,function(K,V,W)return{s=K,c=V,b=W}end;local function X(R,Y)R=s(C/2-R/2)N(1,1,B,C,g)O(R,f,Y)return R+2 end;local function Z(Y,_,a0)local a1={}for a2 in _:gmatch("[^\r\n]+")do a1[#a1+1]=a2:gsub("\t","  ")end;local R=X(#a1,Y)for a3=1,#a1 do O(R,h,a1[a3])R=R+1 end;if a0 then repeat a0=m()until a0==d or a0=="touch"end end;local function a4(...)local a5,a6=load(...)if a5 then a5,a6=xpcall(a5,debug.traceback)if a5 then return end end;F()Z(a,a6,1)end;local a7,a8,a9,aa=function(ab)Z(a,"Booting from "..ab.address)local ac,ad,ae,af,a6=ab.open(b,"rb"),"",""repeat ae=ab.read(ac,r)ad=ad..(ae or"")until not ae;ab.close(ac)a4(ad,"="..b)end,function()return P("Back",nil,1)end,function(Y,ag)local ah,ai,aj=2,1,0;for a3=1,#ag do aj=math.max(aj,#ag[a3].s)end;while 1 do local R,Q,ak=X(#ag+2,Y)for a3=1,#ag do Q=s(B/2-#ag[a3].s/2)if a3==ai then N(s(B/2-aj/2)-2,R,aj+4,1,i)H(j)x(Q,R,ag[a3].s)else G(g)H(h)x(Q,R,ag[a3].s)end;R=R+1 end;ak={m()}if ak[1]==d then if ak[4]==200 and ai>1 then ai=ai-1 elseif ak[4]==208 and ai<#ag then ai=ai+1 elseif ak[4]==28 then if ag[ai].c then ag[ai].c()end;if ag[ai].b then return end end end end end,function(R,al)local K,am,an,ak,ao="",true;while 1 do an=al..K;y(1,R,B,1," ")H(h)x(s(B/2-#an/2),R,an..(am and"â–ˆ"or""))ak={m(0.5)}if ak[1]==d then if ak[4]==28 then return K elseif ak[4]==14 then K=K:sub(1,-2)else ao=unicode.char(ak[3])if ao:match("^[%w%d%p%s]+")then K=K..ao end end;am=true elseif ak[1]=="clipboard"then K=K..ak[3]elseif not ak[1]then am=not am end end end;u.bind(l("screen")(),true)Z(a,"Hold Alt to show boot options menu")local ap,ak=n()+1;while n()<ap do ak={m(ap-n())}if ak[1]==d and ak[4]==56 then local aq={P("Disk management",function()local ar,as={a8()},A()for at in l(e)do local ab=k(at)local au,av=ab.getLabel()or"Unnamed",ab.isReadOnly()o(ar,1,P((at==as and"> "or"  ")..I(au,10)..I(ab.spaceTotal()>1048576 and"HDD"or ab.spaceTotal()>65536 and"FDD"or"SYS",3)..I(av and"R"or"R/W",3)..at:sub(1,8).."  "..I(string.format("%.2f",ab.spaceUsed()/ab.spaceTotal()*100).."%",6,1),function()local aw={a8()}if not av then o(aw,1,P(c,function()ab.setLabel(aa(X(2,c),"Enter new name: "))end,1))o(aw,2,P("Format",function()Z(a,"Formatting filesystem "..at)for ax,ay in ipairs(ab.list("/"))do ab.remove(ay)end;Z(a,"Formatting finished",1)end,1))end;o(aw,1,P("Set as startup",function()z(at)end,1))a9(au.." ("..at..")",aw)end,1))end;a9("Select filesystem",ar)end),P("Shutdown",function()w()end),a8()}if v then o(aq,2,P("Internet recovery",function()local ac,ad,a5,a6=k(v).request("https://raw.githubusercontent.com/IgorTimofeev/MineOSStandalone/master/Installer/Main.lua"),""if ac then Z(a,"Downloading recovery script")while 1 do a5,a6=ac.read(r)if a5 then ad=ad..a5 else ac:close()if a6 then Z(a,a6,1)else a4(ad,"=string")end;break end end else Z(a,"invalid URL-address",1)end end))end;a9(a,aq)end end;local ab=k(A())if ab and ab.exists(b)then a7(ab)else for at in l(e)do ab=k(at)if ab.exists(b)then z(at)a7(ab)break else ab=nil end end;if not ab then Z(a,"No bootable mediums found",1)end end;w()