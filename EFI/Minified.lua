local a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I="MineOS EFI","Change label","key_down","component_added","filesystem","URL boot",component.proxy,component.list,computer.pullSignal,computer.uptime,table.insert,math.max,math.min,math.huge,math.floor,0x2D2D2D,0xE1E1E1,0x878787,0x878787,0xE1E1E1;local J,K,L=g(h("eeprom")()),g(h("gpu")()),h("internet")()local M,N,O,P,Q,R,S=K.set,K.setBackground,K.fill,J.setData,J.getData,K.getResolution()u,v,w,x,y,z,A,B,C,D,E,F,G,H,I={{"/OS.lua"},{"/init.lua",function()computer.getBootAddress,computer.setBootAddress=Q,P end}},function()local T=h("screen")()if T then K.bind(T,true)end end,function(U,V,W,X,Y)N(Y)O(U,V,W,X," ")end,function(U,V,Z,_)K.setForeground(Z)M(U,V,_)end,function(_,a0,a1)return{s=_,c=a0,b=a1}end,function(a2,...)while a2({i(...)})==nil do end end,function(V,Z,_)x(o(R/2-#_/2),V,Z,_)end,function(V,a3)V=o(S/2-V/2)w(1,1,R,S,q)A(V,p,a3)return V+2 end,function(a4,a5)local a6={}for a7 in a4:gmatch("[^\r\n]+")do a6[#a6+1]=a7:gsub("\t","  ")end;local V=B(#a6,a)for a8=1,#a6 do A(V,r,a6[a8])V=V+1 end;if a5 then while i()~=c do end end end,function(...)local a9,aa=load(...)if a9 then a9,aa=xpcall(a9,debug.traceback)if a9 then return end end;C(aa,1)end,function(ab)local ac;for a8=1,#u do ac=u[a8]if ab.exists(ac[1])then C("Booting from "..(ab.getLabel()or ab.address))if Q()~=ab.address then P(ab.address)end;if ac[2]then ac[2]()end;local ad,ae,af,ag,aa=ab.open(ac[1],"rb"),""repeat af=ab.read(ad,n)ae=ae..(af or"")until not af;ab.close(ad)D(ae,"="..ac[1])return 1 end end end,function(ah)return y("Back",ah,1)end,function(a3,ai)local aj,ak=1,0;for a8=1,#ai do ak=math.max(ak,#ai[a8].s)end;z(function(al)local V,U,_=B(#ai+2,a3)for a8=1,#ai do _="  "..ai[a8].s.."  "U=o(R/2-#_/2)if a8==aj then N(s)x(U,V,t,_)N(q)else x(U,V,r,_)end;V=V+1 end;if al[1]==c then if al[4]==200 and aj>1 then aj=aj-1 elseif al[4]==208 and aj<#ai then aj=aj+1 elseif al[4]==28 then if ai[aj].c then ai[aj].c()end;if ai[aj].b then return 1 end end elseif al[1]==d and al[3]=="screen"then v()end end)end,function(a3,am)local V,_,an,ao,ap=B(2,a3),"",1;local function aq()ao=am.._;O(1,V,R,1," ")A(V,r,ao..(an and"_"or""))end;aq()z(function(al)if al[1]==c then if al[4]==28 then return 1 elseif al[4]==14 then _=_:sub(1,-2)else ap=unicode.char(al[3])if ap:match("^[%w%d%p%s]+")then _=_..ap end end;an=1 elseif al[1]=="clipboard"then _=_..al[3]elseif not al[1]then an=not an end;aq()end,0.5)return _ end,function(ar)local as,ae,a9,aa=g(L).request(ar),""if as then C("Downloading script")while 1 do a9,aa=as.read(n)if a9 then ae=ae..a9 else as.close()if aa then C(aa,1)else D(ae,"=url")end;break end end else C("Invalid URL",1)end end;v()C("Hold Alt to show boot options")local at,au=j()+1;while j()<at do au={i(at-j())}if au[1]==c and au[4]==56 then local av={y("Disk utility",function()local aw,ax=function(_,ay)return(#_<ay and _..string.rep(" ",ay-#_)or _:sub(1,ay)).."   "end,{F()}local function az()for a8=2,#ax do table.remove(ax,1)end;for aA in h(e)do local ab=g(aA)local aB,aC=ab.getLabel()or"Unnamed",ab.isReadOnly()k(ax,1,y((aA==Q()and"> "or"  ")..aw(aB,10)..aw(ab.spaceTotal()>1048575 and"HDD"or ab.spaceTotal()>65535 and"FDD"or"SYS",3)..aw(aC and"R  "or"R/W",3)..aw(math.ceil(ab.spaceUsed()/ab.spaceTotal()*100).."%",4)..aA:sub(1,8).."â€¦",function()local ai={y("Set as bootable",function()P(aA)az()end,1),F()}if not aC then k(ai,2,y(b,function()pcall(ab.setLabel,H(b,"New value: "))az()end,1))k(ai,3,y("Erase",function()C("Erasing "..aA)ab.remove("")az()end,1))end;G(aB.." ("..aA..")",ai)end))end end;az()G("Select filesystem",ax)end),F()}if L then k(av,2,y("System recovery",function()I("https://tinyurl.com/29urhz7z")end))k(av,3,y(f,function()I(H(f,"Address: "))end))end;G(a,av)end end;local aD=g(Q())if not(aD and E(aD))then local function aE()for aA in h(e)do aD=g(aA)if E(aD)then computer.shutdown()else aD=nil end end;if not aD then C("Not boot sources found")end end;aE()z(function(al)if al[1]==d then aE()end end)end